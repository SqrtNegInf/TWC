#!/usr/bin/env perl
use v5.36;

use Test::More;
use Math::Prime::Util qw(factor is_prime);

my @TESTS = qw( 0  0
                                               2                                             3           211
                                               5                                            23             7
                             3331113965338635107                                           311           773
                                              11                                           223            13
                                           13367                                          1129      31636373
                                              17                                           233            19
                             3318308475676071413                                            37           211
                                              23                                        331319           773
                                            3251                                         13367           227
                                              29                                           547            31
                                          241271                                           311         31397
                                            1129                                         71129            37
                                             373                                           313 3314192745739
                                              41                                           379            43
                                     22815088913                                       3411949           223
                                              47                        6161791591356884791277             0
                                            3517                                           317          2213
                                              53                                          2333           773
                                           37463                                          1129           229
                                              59                                         35149            61
                                           31237                                           337 1272505013723
              1381321118321175157763339900357651                                          2311            67
                                            3739                                         33191           257
                                              71                                       1119179            73
                                             379                                           571        333271
                                               0                                    3129706267            79
313169138727147145210044974146858220729781791489                               193089459713411           241
                                              83                                          2237          3137
                       6012903280474189529884459                    41431881512748629379008933        719167
                                              89                                         71171     236122171
                                          331319                                           331          1319
                                           36389 172929671097972226356946608292031596899264419            97
                                             277                                         71143        317047
);

## Skip 1 (no prime factors), 49, 77 (large value for home prim)
is( home_prime($_), $TESTS[$_] ) for 2..48,50..76,78..100;

done_testing();

sub home_prime {
  return if (my$t=shift)<2;  ## Skip in t is 0 or 1 which would loop infinitely...
  is_prime($t)?(return$t):($t=join'',factor$t)while 1; ## If prime we return o/w we compute sum of factors
}

